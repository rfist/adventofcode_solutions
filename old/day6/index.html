<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Day 6</title>
</head>
<body>
<script language="JavaScript">
    console.log("start");
    const TURN_ON = 'on';
    const TURN_OFF = 'off';
    const TOGGLE = 'toggle';
    var grid = [];
    for (var i = 0; i < 1000; i++) {
        grid.push([]);
        for (var j = 0; j < 1000; j++) {
            grid[i].push(false);
        }
    }

    var input = ["on,887,9,959,629",
        "on,454,398,844,448",
        "off,539,243,559,965",
        "off,370,819,676,868",
        "off,145,40,370,997",
        "off,301,3,808,453",
        "on,351,678,951,908",
        "toggle,720,196,897,994",
        "toggle,831,394,904,860",
        "toggle,753,664,970,926",
        "off,150,300,213,740",
        "on,141,242,932,871",
        "toggle,294,259,474,326",
        "toggle,678,333,752,957",
        "toggle,393,804,510,976",
        "off,6,964,411,976",
        "off,33,572,978,590",
        "on,579,693,650,978",
        "on,150,20,652,719",
        "off,782,143,808,802",
        "off,240,377,761,468",
        "off,899,828,958,967",
        "on,613,565,952,659",
        "on,295,36,964,978",
        "toggle,846,296,969,528",
        "off,211,254,529,491",
        "off,231,594,406,794",
        "off,169,791,758,942",
        "on,955,440,980,477",
        "toggle,944,498,995,928",
        "on,519,391,605,718",
        "toggle,521,303,617,366",
        "off,524,349,694,791",
        "toggle,391,87,499,792",
        "toggle,562,527,668,935",
        "off,68,358,857,453",
        "toggle,815,811,889,828",
        "off,666,61,768,87",
        "on,27,501,921,952",
        "on,953,102,983,471",
        "on,277,552,451,723",
        "off,64,253,655,960",
        "on,47,485,734,977",
        "off,59,119,699,734",
        "toggle,407,898,493,955",
        "toggle,912,966,949,991",
        "on,479,990,895,990",
        "toggle,390,589,869,766",
        "toggle,593,903,926,943",
        "toggle,358,439,870,528",
        "off,649,410,652,875",
        "on,629,834,712,895",
        "toggle,254,555,770,901",
        "toggle,641,832,947,850",
        "on,268,448,743,777",
        "off,512,123,625,874",
        "off,498,262,930,811",
        "off,835,158,886,242",
        "toggle,546,310,607,773",
        "on,501,505,896,909",
        "off,666,796,817,924",
        "toggle,987,789,993,809",
        "toggle,745,8,860,693",
        "toggle,181,983,731,988",
        "on,826,174,924,883",
        "on,239,228,843,993",
        "on,205,613,891,667",
        "toggle,867,873,984,896",
        "on,628,251,677,681",
        "toggle,276,956,631,964",
        "on,78,358,974,713",
        "on,521,360,773,597",
        "off,963,52,979,502",
        "on,117,151,934,622",
        "toggle,237,91,528,164",
        "on,944,269,975,453",
        "toggle,979,460,988,964",
        "off,440,254,681,507",
        "toggle,347,100,896,785",
        "off,329,592,369,985",
        "on,931,960,979,985",
        "toggle,703,3,776,36",
        "toggle,798,120,908,550",
        "off,186,605,914,709",
        "off,921,725,979,956",
        "toggle,167,34,735,249",
        "on,726,781,987,936",
        "toggle,720,336,847,756",
        "on,171,630,656,769",
        "off,417,276,751,500",
        "toggle,559,485,584,534",
        "on,568,629,690,873",
        "toggle,248,712,277,988",
        "toggle,345,594,812,723",
        "off,800,108,834,618",
        "off,967,439,986,869",
        "on,842,209,955,529",
        "on,132,653,357,696",
        "on,817,38,973,662",
        "off,569,816,721,861",
        "on,568,429,945,724",
        "on,77,458,844,685",
        "off,138,78,498,851",
        "on,136,21,252,986",
        "off,2,460,863,472",
        "on,172,81,839,332",
        "on,123,216,703,384",
        "off,879,644,944,887",
        "toggle,227,491,504,793",
        "toggle,580,418,741,479",
        "toggle,65,276,414,299",
        "toggle,482,486,838,931",
        "off,557,768,950,927",
        "off,615,617,955,864",
        "on,859,886,923,919",
        "on,391,330,499,971",
        "toggle,521,835,613,847",
        "on,822,787,989,847",
        "on,192,142,357,846",
        "off,564,945,985,945",
        "off,479,361,703,799",
        "toggle,56,481,489,978",
        "off,632,991,774,998",
        "toggle,723,526,945,792",
        "on,344,149,441,640",
        "toggle,568,927,624,952",
        "on,621,784,970,788",
        "toggle,665,783,795,981",
        "toggle,386,610,817,730",
        "toggle,440,399,734,417",
        "toggle,939,201,978,803",
        "off,395,883,554,929",
        "on,340,309,637,561",
        "off,875,147,946,481",
        "off,945,837,957,922",
        "off,429,982,691,991",
        "toggle,227,137,439,822",
        "toggle,4,848,7,932",
        "off,545,146,756,943",
        "on,763,863,937,994",
        "on,232,94,404,502",
        "off,742,254,930,512",
        "on,91,931,101,942",
        "toggle,585,106,651,425",
        "on,506,700,567,960",
        "off,548,44,718,352",
        "off,194,827,673,859",
        "off,6,645,509,764",
        "off,13,230,821,361",
        "on,734,629,919,631",
        "toggle,788,552,957,972",
        "toggle,244,747,849,773",
        "off,162,553,276,887",
        "off,569,577,587,604",
        "off,799,482,854,956",
        "on,744,535,909,802",
        "toggle,330,641,396,986",
        "off,927,458,966,564",
        "toggle,984,486,986,913",
        "toggle,519,682,632,708",
        "on,984,977,989,986",
        "toggle,766,423,934,495",
        "on,17,509,947,718",
        "on,413,783,631,903",
        "on,482,370,493,688",
        "on,433,859,628,938",
        "off,769,549,945,810",
        "on,178,853,539,941",
        "off,203,251,692,433",
        "off,525,638,955,794",
        "on,169,70,764,939",
        "toggle,59,352,896,404",
        "toggle,143,245,707,320",
        "off,103,35,160,949",
        "toggle,496,24,669,507",
        "off,581,847,847,903",
        "on,689,153,733,562",
        "on,821,487,839,699",
        "on,837,627,978,723",
        "toggle,96,748,973,753",
        "toggle,99,818,609,995",
        "on,731,193,756,509",
        "off,622,55,813,365",
        "on,456,490,576,548",
        "on,48,421,163,674",
        "off,853,861,924,964",
        "off,59,963,556,987",
        "on,458,710,688,847",
        "toggle,12,484,878,562",
        "off,241,964,799,983",
        "off,434,299,845,772",
        "toggle,896,725,956,847",
        "on,740,289,784,345",
        "off,395,840,822,845",
        "on,955,224,996,953",
        "off,710,186,957,722",
        "off,485,949,869,985",
        "on,848,209,975,376",
        "toggle,221,241,906,384",
        "on,588,49,927,496",
        "on,273,332,735,725",
        "on,505,962,895,962",
        "toggle,820,112,923,143",
        "on,919,792,978,982",
        "toggle,489,461,910,737",
        "off,202,642,638,940",
        "off,708,953,970,960",
        "toggle,437,291,546,381",
        "on,409,358,837,479",
        "off,756,279,870,943",
        "off,154,657,375,703",
        "off,524,622,995,779",
        "toggle,514,221,651,850",
        "toggle,808,464,886,646",
        "toggle,483,537,739,840",
        "toggle,654,769,831,825",
        "off,326,37,631,69",
        "off,590,570,926,656",
        "off,881,913,911,998",
        "on,996,102,998,616",
        "off,677,503,828,563",
        "on,860,251,877,441",
        "off,964,100,982,377",
        "toggle,888,403,961,597",
        "off,632,240,938,968",
        "toggle,731,176,932,413",
        "on,5,498,203,835",
        "on,819,352,929,855",
        "toggle,393,813,832,816",
        "toggle,725,689,967,888",
        "on,968,950,969,983",
        "off,152,628,582,896",
        "off,165,844,459,935",
        "off,882,741,974,786",
        "off,283,179,731,899",
        "toggle,197,366,682,445",
        "on,106,309,120,813",
        "toggle,950,387,967,782",
        "off,274,603,383,759",
        "off,155,665,284,787",
        "toggle,551,871,860,962",
        "off,30,826,598,892",
        "toggle,76,552,977,888",
        "on,938,180,994,997",
        "toggle,62,381,993,656",
        "toggle,625,861,921,941",
        "on,685,311,872,521",
        "on,124,934,530,962",
        "on,606,379,961,867",
        "off,792,735,946,783",
        "on,417,480,860,598",
        "toggle,178,91,481,887",
        "off,23,935,833,962",
        "toggle,317,14,793,425",
        "on,986,89,999,613",
        "off,359,201,560,554",
        "off,729,494,942,626",
        "on,204,143,876,610",
        "toggle,474,97,636,542",
        "off,902,924,976,973",
        "off,389,442,824,638",
        "off,622,863,798,863",
        "on,840,622,978,920",
        "toggle,567,374,925,439",
        "off,643,319,935,662",
        "toggle,185,42,294,810",
        "on,47,124,598,880",
        "toggle,828,303,979,770",
        "off,174,272,280,311",
        "off,540,50,880,212",
        "on,141,994,221,998",
        "on,476,695,483,901",
        "on,960,216,972,502",
        "toggle,752,335,957,733",
        "off,419,713,537,998",
        "toggle,772,846,994,888",
        "on,881,159,902,312",
        "off,537,651,641,816",
        "toggle,561,947,638,965",
        "on,368,458,437,612",
        "on,290,149,705,919",
        "on,711,918,974,945",
        "toggle,916,242,926,786",
        "toggle,522,272,773,314",
        "on,432,897,440,954",
        "off,132,169,775,380",
        "toggle,52,205,693,747",
        "toggle,926,309,976,669",
        "off,838,342,938,444",
        "on,144,431,260,951",
        "toggle,780,318,975,495",
        "off,185,412,796,541",
        "on,879,548,892,860",
        "on,294,132,460,338",
        "on,823,500,899,529",
        "off,225,603,483,920",
        "toggle,717,493,930,875",
        "toggle,534,948,599,968",
        "on,522,730,968,950",
        "off,102,229,674,529"];

    //    apply("on,887,9,959,629");

    for (var a = 0; a < input.length; a++) {
        apply(input[a]);
    }
    console.log("litting Lights " + countLittingLights());

    function apply(command_string) {
        var command_data = command_string.split(',');
        var x1 = parseInt(command_data[1]),           // 499
                y1 = parseInt(command_data[2]),             // 499
                x2 = parseInt(command_data[3]),                   // 500
                y2 = parseInt(command_data[4]),
                command = command_data[0];
//        console.log(typeof x1, typeof y1, typeof x2, typeof y2);
        if (x1 > x2 || y1 > y2) {
            console.log("error", command_string);
            console.log(x1, x2);
        }
        for (var x = x1; x <= x2; x++) {
            for (var y = y1; y <= y2; y++) {
                switch (command) {
                    case TURN_ON:
                        grid[x][y] = true;
                        break;
                    case TURN_OFF:
                        grid[x][y] = false;
                        break;
                    case TOGGLE:
                        grid[x][y] = !grid[x][y];
                        break;
                    default:
                        console.log("error in command!");
                        break;
                }
            }
        }
    }

    function countLittingLights() {
        var count = 0;
        for (var i = 0; i < 1000; i++) {
            for (var j = 0; j < 1000; j++) {
                if (grid[i][j] === true) {
                    count++;
                }
            }
        }
        return count;
    }

</script>
</body>
</html>